@{
    ViewBag.Title = "قطع غيار";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/Content/select2.min.css" rel="stylesheet" />

<div class="row">

    <div class="col-md-6">
        <button class="btn btn-success" data-toggle="modal" ng-click="vm.new()"> جديد </button>
    </div>

    <div class="col-md-6">
        <h2>مثال</h2>
    </div>
</div>

<div class="box row">
    <div class="box-header">
        @*<h3 class="box-title">Table Header</h3>*@
    </div>
    <div class="box-body">
        <table datatable="ng" class="table table-bordered table-striped table-hover">
            <thead>
                <tr>
                    <th>الرقم</th>
                    <th>العربة</th>
                    <th>قطع الغيار</th>
                    <th>القيمة</th>
                    <th width="200px"></th>
                </tr>
            </thead>

            <tbody id="tableBody">
                <tr ng-repeat="x in vm.entities">
                    <td ng-bind="x.Id"></td>
                    <td>{{x.Car.CarNumber}}, {{x.Car.CarType.ArabicName}}, {{x.Car.CarModel.ArabicName}}</td>
                    <td ng-bind="x.SparePart.ArabicName"></td>
                    <td ng-bind="x.Price"></td>
                    <td>
                        <Button type="button" class="btn btn-success btn-xs" ng-click="vm.edit(x)">تعديل</Button>
                        <Button type="button" class="btn btn-default btn-xs" ng-click="vm.edit(x)">التفاصيل</Button>
                        <Button type="button" class="btn btn-danger btn-xs" ng-click="vm.delete(x)">حذف</Button>
                    </td>
                </tr>
            </tbody>

        </table>
    </div>
</div>


<div class="modal fade" id="conceptModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">قطع غيار</h4>
            </div>
            <div class="modal-body">

                <form name="conceptForm" novalidate>
                    <div class="content">

                        <div class="row">
                            <div class="col-md-6">
                                <label class="control-label" for="mySingleFieldTags">قطع الغيار</label>
                                <input name="tags" class="form-control" id="mySingleFieldTags" value="fancy, new, tag, demo">
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <div class="form-group" ng-class="{'has-error': conceptForm.name.$error.required}">
                                        <label class="control-label" for="conceptName">رقم العربة</label>
                                        <span class="required" ng-show="conceptForm.name.$error.required">
                                            الرجاء ادخال الاسم
                                        </span>
                                        <input name="name" class="form-control" id="conceptName" ng-model="vm.concept.Name" required />
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="form-group" ng-class="{'has-error': conceptForm.value.$error.required}">
                                        <label class="control-label" for="carType">نوع العربة</label>
                                        <div class="input-group input-group-sm">

                                            <span class="input-group-btn">
                                                <button class="btn btn-info btn-flat" type="button">+</button>
                                            </span>
                                            <select class="form-control select2" id="carType" style="width: 100%; height: 30px">
                                                <option selected="selected">صالون</option>
                                                <option>بوكس</option>
                                                <option>ليلى علوي</option>
                                                <option>هاتش باك</option>
                                                <option>هايس</option>
                                                <option>امجاد</option>
                                                <option>ركشة</option>
                                            </select>

                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="form-group" ng-class="{'has-error': conceptForm.value.$error.required}">
                                        <label class="control-label" for="carModel">موديل العربة</label>

                                        <div class="input-group input-group-sm">
                                            <span class="input-group-btn">
                                                <button class="btn btn-info btn-flat" type="button">+</button>
                                            </span>
                                            <select class="form-control select2" id="carModel" style="width: 100%; height: 30px">
                                                <option selected="selected">لانسر EX</option>
                                                <option>طيارة</option>
                                                <option>بطيخ</option>
                                                <option>اي حاجة</option>
                                                <option>والسلام</option>
                                                <option>يلا</option>
                                                <option>املا بس</option>
                                            </select>
                                        </div>

                                    </div>
                                </div>

                                <div class="row">
                                    <div class="form-group" ng-class="{'has-error': conceptForm.price.$error.required}">
                                        <label class="control-label" for="conceptPrice">السعر</label>
                                        <input name="price" class="form-control" id="conceptPrice" ng-model="vm.concept.Price" required />
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>
                </form>

            </div>
            <div class="modal-footer">
                <button id="btnUpload" type="button" class="btn btn-default" data-dismiss="modal">اغلق</button>
                <button type="button" class="btn btn-success" @*ng-disabled="conceptForm.$invalid"*@ ng-click="vm.save()">حفظ</button>
            </div>
        </div>
    </div>
</div>




@section scripts
{
    <script src="~/Scripts/select2.full.min.js"></script>
    <script src="~/ViewModels/Base/BaseViewModel.js"></script>
    <script src="~/ViewModels/SparePartJobViewModel.js"></script>

    <script>
        var parking = angular.module("CarWorkshop", []);

        parking.controller("CarWorkshopController", function ($scope) {

            $scope.vm = new SparePartJob.SparePartJobViewModel($scope);

            $(document).ready(function () {
                $scope.vm.refresh();

                $(".select2").select2();

                var sampleTags = ['c++', 'java', 'php', 'coldfusion', 'javascript', 'asp', 'ruby', 'python', 'c', 'scala', 'groovy', 'haskell', 'perl', 'erlang', 'apl', 'cobol', 'go', 'lua'];

                $("#mySingleFieldTags").tagit({
                    availableTags: sampleTags
                });
            });
        });
    </script>
}